<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>윤선영 | YOON SUNYOUNG</title>

<!-- 웹폰트 -->
<link rel="stylesheet" href="/fonts/SUIT-Variable-woff2/SUIT-Variable.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Gowun+Batang:wght@400;700&display=swap" rel="stylesheet">

<!-- 스타일시트 -->
<link rel="stylesheet" href="/style.css">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GDLJ4DGHX9"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-GDLJ4DGHX9');
</script>
</head>
<body>

<header>
  <a href="index.html" class="logo-link">
    <div class="logo">
      <div class="kr">윤선영</div>
      <div class="en"><p>YOON</p><p>SUNYOUNG</p></div>
    </div>
  </a>
  <nav>
    <button class="menu-toggle" aria-label="메뉴 열기">☰</button>
    <ul class="menu">
      <li class="close-menu">×</li>
      <li><a href="index.html">첫 화면</a></li>
      <li><a href="news.html">소식</a></li>
      <li><a href="work.html">작업</a></li>
      <li><a href="about.html">소개</a></li>
      <li class="lang"><a href="#" id="lang-switch" class="lang-switch"><img src="images/icon_globe.png" alt="Language" class="icon">English</a></li>
    </ul>
  </nav>
</header>

<main>
  <!-- 이미지 슬라이더 -->
  <section class="slider">
    <div class="slides">
      <img src="images/slide1.jpg" alt="Slide 1" class="active">
      <img src="images/slide2.jpg" alt="Slide 2">
      <img src="images/slide3.jpg" alt="Slide 3">
    </div>
    <div class="slider-overlay"></div>
    <div class="slider-intro">
      <div class="intro active">
        <h2>그날 그곳에 있었습니다</h2>
        <p>2025년 12월 3일 밤 10시, KBS1 방송. KBS 홈페이지, Wavve, 유튜브 등에서 다시 보실 수 있습니다.</p>
      </div>
      <div class="intro">
        <h2>12.3 그날 그곳에 있었습니다</h2>
        <p>전국 온오프라인 서점에서 구매하실 수 있습니다.</p>
      </div>
      <div class="intro">
        <h2>소년은 혼자 자라지 않는다</h2>
         <p>2024년 4월 26일 밤 10시, KBS1 방송. KBS 홈페이지, Wavve, 유튜브 등에서 다시 보실 수 있습니다.</p>
       </div>
     </div>
    <button class="prev" aria-label="이전 슬라이드">‹</button>
    <button class="next" aria-label="다음 슬라이드">›</button>
    <div class="dots">
      <span class="dot active" data-index="0"></span>
      <span class="dot" data-index="1"></span>
      <span class="dot" data-index="2"></span>
    </div>
  </section>
  <!-- 최근 소식 -->
  <section class="recent-news">
    <h1>최근 소식</h1>
    <div id="recent-news-container"></div>
    <div class="more-news">
      <a href="news.html">더 많은 소식 보기 →</a>
  </section>
</main>

<footer>
  <p>&copy; 윤선영 YOON SUNYOUNG</p>
</footer>

<script>
document.addEventListener("DOMContentLoaded", function() {
  // ------------------------------
  // 모바일 메뉴 토글
  // ------------------------------
  const menuToggle = document.querySelector('.menu-toggle');
  const menu = document.querySelector('.menu');
  const closeMenuBtn = document.querySelector('.close-menu');

  menuToggle.addEventListener('click', () => menu.classList.toggle('active'));
  closeMenuBtn.addEventListener('click', () => menu.classList.remove('active'));
  document.addEventListener('click', e => {
    const isClickInside = menu.contains(e.target) || menuToggle.contains(e.target);
    if (!isClickInside && menu.classList.contains('active')) menu.classList.remove('active');
  });

  // ------------------------------
  // 슬라이드
  // ------------------------------
  const slides = document.querySelectorAll('.slides img');
  const dots = document.querySelectorAll('.dot');
  const intros = document.querySelectorAll('.slider-intro .intro');
  let currentIndex = 0;
  const slideIntervalTime = 10000;

  function showSlide(index) {
    slides.forEach((slide,i)=>slide.classList.toggle('active', i===index));
    dots.forEach(dot=>dot.classList.remove('active'));
    dots[index].classList.add('active');

    intros.forEach((intro, i) =>
      intro.classList.toggle('active', i === index)
    );

    currentIndex = index;
  }

  function nextSlide() {
    let nextIndex = (currentIndex + 1) % slides.length;
    showSlide(nextIndex);
  }

  function prevSlide() {
    let prevIndex = (currentIndex - 1 + slides.length) % slides.length;
    showSlide(prevIndex);
  }

  let slideInterval = setInterval(nextSlide, slideIntervalTime);

  document.querySelector('.next').addEventListener('click', ()=>{
    clearInterval(slideInterval);
    nextSlide();
    slideInterval = setInterval(nextSlide, slideIntervalTime);
  });

  document.querySelector('.prev').addEventListener('click', ()=>{
    clearInterval(slideInterval);
    prevSlide();
    slideInterval = setInterval(nextSlide, slideIntervalTime);
  });

  dots.forEach(dot => {
    dot.addEventListener('click', ()=>{
      clearInterval(slideInterval);
      showSlide(parseInt(dot.dataset.index));
      slideInterval = setInterval(nextSlide, slideIntervalTime);
    });
  });

  // ------------------------------
  // 최근 뉴스 5개 렌더링
  // ------------------------------
  fetch('news.json')
    .then(res => res.json())
    .then(data => {
      const newsData = data.sort((a, b) => new Date(b.date) - new Date(a.date));
      const recentNews = newsData.slice(0, 5); // 최근 5개
      const container = document.getElementById('recent-news-container');

      recentNews.forEach(item => {
        const article = document.createElement('article');
        article.className = 'news-item';

        const dateSpan = document.createElement('span');
        dateSpan.className = 'date';
        dateSpan.textContent = item.date;

        const titleLink = document.createElement('a');
        titleLink.className = 'title';
        titleLink.href = `news_detail.html?id=${item.id}`;
        titleLink.textContent = item.title;

        article.appendChild(titleLink);
        article.appendChild(dateSpan);
        container.appendChild(article);
      });
    });
  // ------------------------------
  // 언어 전환 버튼 처리
  // ------------------------------
  const langSwitchBtns = document.querySelectorAll('.lang-switch');

  langSwitchBtns.forEach(btn => {
    btn.addEventListener('click', e => {
      e.preventDefault();

      const path = window.location.pathname;  // 현재 경로
      const search = window.location.search;  // 쿼리스트링 ?id=13 등
      const fileName = path.split('/').pop(); // index.html, about.html 등

      let targetPath = '';

      // 현재 페이지가 영어(/en/)인지 확인
      if (path.includes('/en/')) {
        // 영어 → 한국어: 한 단계 위로 이동
        targetPath = '../' + fileName;
      } else {
        // 한국어 → 영어: en/ 폴더 아래로 이동
        targetPath = 'en/' + fileName;
      }

      window.location.href = targetPath + search;
    });
  });
});
</script>

</body>
</html>
